# ðŸš€ ä½œæ–‡æ‰¹é˜…ç³»ç»Ÿ - æ–°æ‰‹éƒ¨ç½²æŒ‡å—

> æœ¬æŒ‡å—ä¸“ä¸ºæ²¡æœ‰éƒ¨ç½²ç»éªŒçš„æ–°æ‰‹ç¼–å†™ï¼Œæ¯ä¸€æ­¥éƒ½æœ‰è¯¦ç»†è¯´æ˜Žã€‚

---

## ðŸ“‹ å‡†å¤‡å·¥ä½œæ¸…å•

### 1. ä½ éœ€è¦å‡†å¤‡çš„ä¸œè¥¿

- âœ… ä¸€å°äº‘æœåŠ¡å™¨ï¼ˆé˜¿é‡Œäº‘/è…¾è®¯äº‘/åŽä¸ºäº‘ç­‰ï¼‰
  - æŽ¨èé…ç½®ï¼š2æ ¸4Gï¼Œ50GBç¡¬ç›˜
  - æ“ä½œç³»ç»Ÿï¼šUbuntu 20.04ï¼ˆæœ€ç®€å•ï¼‰
  
- âœ… ä¸€ä¸ªåŸŸåï¼ˆå·²å¤‡æ¡ˆï¼‰
  - ä¾‹å¦‚ï¼šessay.yourdomain.com
  
- âœ… ä½ çš„ç”µè„‘ï¼ˆWindows/Mac/Linuxéƒ½å¯ä»¥ï¼‰
  - éœ€è¦å®‰è£…SSHå·¥å…·è¿žæŽ¥æœåŠ¡å™¨

### 2. éœ€è¦å®‰è£…çš„è½¯ä»¶ï¼ˆåœ¨ä½ çš„ç”µè„‘ä¸Šï¼‰

**Windowsç”¨æˆ·**ï¼š
- [MobaXterm](https://mobaxterm.mobatek.net/)ï¼ˆSSHè¿žæŽ¥å·¥å…·ï¼Œå…è´¹ï¼‰
- [VS Code](https://code.visualstudio.com/)ï¼ˆä»£ç ç¼–è¾‘å™¨ï¼Œå…è´¹ï¼‰

**Mac/Linuxç”¨æˆ·**ï¼š
- è‡ªå¸¦ç»ˆç«¯å³å¯
- [VS Code](https://code.visualstudio.com/)ï¼ˆä»£ç ç¼–è¾‘å™¨ï¼Œå…è´¹ï¼‰

---

## ðŸŽ¯ éƒ¨ç½²æ–¹å¼é€‰æ‹©

æˆ‘ä¸ºä½ å‡†å¤‡äº†ä¸¤ç§éƒ¨ç½²æ–¹å¼ï¼Œ**å¼ºçƒˆæŽ¨èæ–¹å¼ä¸€**ï¼š

### æ–¹å¼ä¸€ï¼šä¸€é”®è„šæœ¬éƒ¨ç½²ï¼ˆæŽ¨èæ–°æ‰‹ï¼‰â­â­â­â­â­
- âœ… æœ€ç®€å•ï¼Œä¸€æ¡å‘½ä»¤æžå®š
- âœ… è‡ªåŠ¨å®‰è£…æ‰€æœ‰ä¾èµ–
- âœ… è‡ªåŠ¨é…ç½®çŽ¯å¢ƒ
- â±ï¸ é¢„è®¡è€—æ—¶ï¼š30åˆ†é’Ÿ

### æ–¹å¼äºŒï¼šæ‰‹åŠ¨éƒ¨ç½²
- âš ï¸ éœ€è¦ä¸€æ­¥æ­¥æ“ä½œ
- âš ï¸ å®¹æ˜“å‡ºé”™
- â±ï¸ é¢„è®¡è€—æ—¶ï¼š2-3å°æ—¶

**æœ¬æŒ‡å—ä¸»è¦è®²è§£æ–¹å¼ä¸€ï¼Œå¦‚æžœé‡åˆ°é—®é¢˜å†è€ƒè™‘æ–¹å¼äºŒã€‚**

---

## ðŸ“ ç¬¬ä¸€æ­¥ï¼šè¿žæŽ¥åˆ°æœåŠ¡å™¨

### Windowsç”¨æˆ·ï¼ˆä½¿ç”¨MobaXtermï¼‰

1. **æ‰“å¼€MobaXterm**

2. **ç‚¹å‡»å·¦ä¸Šè§’ "Session" â†’ "SSH"**

3. **å¡«å†™ä¿¡æ¯**ï¼š
   ```
   Remote host: ä½ çš„æœåŠ¡å™¨IPåœ°å€ï¼ˆä¾‹å¦‚ï¼š123.45.67.89ï¼‰
   Username: root
   Port: 22
   ```

4. **ç‚¹å‡» "OK"**ï¼Œè¾“å…¥æœåŠ¡å™¨å¯†ç 

5. **æˆåŠŸè¿žæŽ¥**åŽï¼Œä½ ä¼šçœ‹åˆ°ç±»ä¼¼è¿™æ ·çš„ç•Œé¢ï¼š
   ```bash
   root@your-server:~#
   ```

### Mac/Linuxç”¨æˆ·ï¼ˆä½¿ç”¨ç»ˆç«¯ï¼‰

1. **æ‰“å¼€ç»ˆç«¯**

2. **è¾“å…¥å‘½ä»¤**ï¼ˆæ›¿æ¢æˆä½ çš„æœåŠ¡å™¨IPï¼‰ï¼š
   ```bash
   ssh root@123.45.67.89
   ```

3. **è¾“å…¥å¯†ç **ï¼ŒæˆåŠŸè¿žæŽ¥

---

## ðŸ”§ ç¬¬äºŒæ­¥ï¼šè¿è¡Œä¸€é”®éƒ¨ç½²è„šæœ¬

### 2.1 ä¸‹è½½éƒ¨ç½²è„šæœ¬

è¿žæŽ¥åˆ°æœåŠ¡å™¨åŽï¼Œ**å¤åˆ¶ç²˜è´´**ä»¥ä¸‹å‘½ä»¤ï¼ˆä¸€æ¬¡ä¸€è¡Œï¼‰ï¼š

```bash
# 1. ä¸‹è½½éƒ¨ç½²è„šæœ¬
wget https://raw.githubusercontent.com/your-repo/essay-grader/main/deploy.sh

# 2. ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x deploy.sh

# 3. è¿è¡Œè„šæœ¬
./deploy.sh
```

### 2.2 è„šæœ¬ä¼šè‡ªåŠ¨å®Œæˆä»¥ä¸‹æ“ä½œ

è„šæœ¬è¿è¡Œæ—¶ï¼Œä½ ä¼šçœ‹åˆ°è¿›åº¦æç¤ºï¼š

```
[1/10] æ£€æŸ¥ç³»ç»ŸçŽ¯å¢ƒ...
[2/10] å®‰è£…Python 3.9...
[3/10] å®‰è£…Node.js...
[4/10] å®‰è£…Nginx...
[5/10] å…‹éš†é¡¹ç›®ä»£ç ...
[6/10] å®‰è£…åŽç«¯ä¾èµ–...
[7/10] åˆå§‹åŒ–æ•°æ®åº“...
[8/10] æž„å»ºå‰ç«¯...
[9/10] é…ç½®Nginx...
[10/10] å¯åŠ¨æœåŠ¡...

âœ… éƒ¨ç½²å®Œæˆï¼
```

### 2.3 é…ç½®åŸŸåå’ŒSSLè¯ä¹¦

è„šæœ¬ä¼šè¯¢é—®ä½ å‡ ä¸ªé—®é¢˜ï¼Œ**æŒ‰æç¤ºè¾“å…¥**ï¼š

```bash
è¯·è¾“å…¥ä½ çš„åŸŸåï¼ˆä¾‹å¦‚ï¼šessay.yourdomain.comï¼‰ï¼š
> essay.yourdomain.com

æ˜¯å¦é…ç½®SSLè¯ä¹¦ï¼Ÿ(y/n)ï¼š
> y

è¯·è¾“å…¥ä½ çš„é‚®ç®±ï¼ˆç”¨äºŽSSLè¯ä¹¦ï¼‰ï¼š
> your-email@example.com
```

**ç­‰å¾…5-10åˆ†é’Ÿ**ï¼Œè„šæœ¬ä¼šè‡ªåŠ¨ï¼š
- ç”³è¯·å…è´¹SSLè¯ä¹¦ï¼ˆLet's Encryptï¼‰
- é…ç½®Nginx
- å¯åŠ¨æ‰€æœ‰æœåŠ¡

---

## ðŸŽ‰ ç¬¬ä¸‰æ­¥ï¼šéªŒè¯éƒ¨ç½²

### 3.1 æ£€æŸ¥æœåŠ¡çŠ¶æ€

è¿è¡Œä»¥ä¸‹å‘½ä»¤æ£€æŸ¥æœåŠ¡æ˜¯å¦æ­£å¸¸ï¼š

```bash
# æ£€æŸ¥åŽç«¯æœåŠ¡
systemctl status essay-grader

# æ£€æŸ¥NginxæœåŠ¡
systemctl status nginx
```

å¦‚æžœçœ‹åˆ° **"active (running)"** å°±è¯´æ˜ŽæœåŠ¡æ­£å¸¸è¿è¡Œã€‚

### 3.2 è®¿é—®ç½‘ç«™

åœ¨æµè§ˆå™¨ä¸­æ‰“å¼€ä½ çš„åŸŸåï¼š

```
https://essay.yourdomain.com
```

å¦‚æžœçœ‹åˆ°ç™»å½•é¡µé¢ï¼Œ**æ­å–œä½ ï¼Œéƒ¨ç½²æˆåŠŸï¼** ðŸŽ‰

### 3.3 é»˜è®¤ç®¡ç†å‘˜è´¦å·

é¦–æ¬¡ç™»å½•ä½¿ç”¨ä»¥ä¸‹è´¦å·ï¼š

```
ç”¨æˆ·åï¼šadmin@example.com
å¯†ç ï¼šadmin123
```

**âš ï¸ é‡è¦ï¼šç™»å½•åŽç«‹å³ä¿®æ”¹å¯†ç ï¼**

---

## ðŸ” ç¬¬å››æ­¥ï¼šåŸŸåè§£æžé…ç½®

å¦‚æžœè®¿é—®åŸŸåæ—¶æ‰“ä¸å¼€ï¼Œéœ€è¦é…ç½®åŸŸåè§£æžï¼š

### 4.1 ç™»å½•åŸŸåæœåŠ¡å•†

- é˜¿é‡Œäº‘ï¼šhttps://dns.console.aliyun.com/
- è…¾è®¯äº‘ï¼šhttps://console.cloud.tencent.com/cns
- å…¶ä»–æœåŠ¡å•†ç±»ä¼¼

### 4.2 æ·»åŠ DNSè®°å½•

æ·»åŠ ä¸€æ¡ **Aè®°å½•**ï¼š

```
è®°å½•ç±»åž‹ï¼šA
ä¸»æœºè®°å½•ï¼šessayï¼ˆæˆ–ä½ æƒ³è¦çš„å­åŸŸåï¼‰
è®°å½•å€¼ï¼šä½ çš„æœåŠ¡å™¨IPåœ°å€
TTLï¼š10åˆ†é’Ÿ
```

### 4.3 ç­‰å¾…ç”Ÿæ•ˆ

DNSè§£æžé€šå¸¸éœ€è¦ **10åˆ†é’Ÿåˆ°2å°æ—¶** ç”Ÿæ•ˆï¼Œè€å¿ƒç­‰å¾…ã€‚

å¯ä»¥ç”¨ä»¥ä¸‹å‘½ä»¤æ£€æŸ¥æ˜¯å¦ç”Ÿæ•ˆï¼š

```bash
ping essay.yourdomain.com
```

å¦‚æžœèƒ½pingé€šï¼Œè¯´æ˜Žè§£æžæˆåŠŸã€‚

---

## ðŸ“š ç¬¬äº”æ­¥ï¼šå¯¼å…¥å­¦ç”Ÿæ•°æ®

### 5.1 å‡†å¤‡å­¦ç”Ÿæ•°æ®

åˆ›å»ºä¸€ä¸ªExcelæ–‡ä»¶ï¼ˆstudents.xlsxï¼‰ï¼Œæ ¼å¼å¦‚ä¸‹ï¼š

| å§“å | é‚®ç®± | å­¦å· | ç­çº§ |
|------|------|------|------|
| å¼ ä¸‰ | zhangsan@example.com | 2024001 | ä¸€ç­ |
| æŽå›› | lisi@example.com | 2024002 | ä¸€ç­ |

### 5.2 ä¸Šä¼ æ–‡ä»¶åˆ°æœåŠ¡å™¨

**Windowsç”¨æˆ·ï¼ˆMobaXtermï¼‰**ï¼š
- ç›´æŽ¥æ‹–æ‹½æ–‡ä»¶åˆ°å·¦ä¾§æ–‡ä»¶åˆ—è¡¨

**Mac/Linuxç”¨æˆ·**ï¼š
```bash
scp students.xlsx root@ä½ çš„æœåŠ¡å™¨IP:/root/
```

### 5.3 å¯¼å…¥æ•°æ®

åœ¨æœåŠ¡å™¨ä¸Šè¿è¡Œï¼š

```bash
cd /var/www/essay-grader
python scripts/import_students.py /root/students.xlsx
```

çœ‹åˆ° **"âœ… æˆåŠŸå¯¼å…¥XXä¸ªå­¦ç”Ÿ"** å°±å®Œæˆäº†ã€‚

---

## ðŸŽ“ ç¬¬å…­æ­¥ï¼šå¼€å§‹ä½¿ç”¨

### æ•™å¸ˆç«¯æ“ä½œæµç¨‹

1. **ç™»å½•ç³»ç»Ÿ**
   - ä½¿ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•
   - ä¿®æ”¹å¯†ç 

2. **æ·»åŠ å­¦ç”Ÿ**
   - è¿›å…¥"å­¦ç”Ÿç®¡ç†"
   - ç‚¹å‡»"æ‰¹é‡å¯¼å…¥"æˆ–"æ·»åŠ å­¦ç”Ÿ"
   - å­¦ç”Ÿä¼šæ”¶åˆ°åˆå§‹å¯†ç ï¼ˆé»˜è®¤ï¼š123456ï¼‰

3. **ä¸Šä¼ ä½œæ–‡æ‰¹é˜…**
   - è¿›å…¥"æ‰¹é˜…ç®¡ç†"
   - ä¸Šä¼ é¢˜ç›®å›¾ç‰‡
   - æ‰¹é‡ä¸Šä¼ å­¦ç”Ÿä½œæ–‡å›¾ç‰‡
   - ç‚¹å‡»"å¼€å§‹æ‰¹é˜…"
   - ç­‰å¾…æ‰¹é˜…å®Œæˆ

4. **æŸ¥çœ‹ç»“æžœ**
   - è¿›å…¥"è®°å½•ç®¡ç†"
   - æŸ¥çœ‹æ‰€æœ‰å­¦ç”Ÿçš„æ‰¹é˜…ç»“æžœ
   - å¯ä»¥å¯¼å‡ºExcel

### å­¦ç”Ÿç«¯æ“ä½œæµç¨‹

1. **é¦–æ¬¡ç™»å½•**
   - ä½¿ç”¨å§“åæˆ–é‚®ç®±ç™»å½•
   - åˆå§‹å¯†ç ï¼š123456
   - å¼ºåˆ¶ä¿®æ”¹å¯†ç 

2. **æŸ¥çœ‹æ‰¹é˜…è®°å½•**
   - è¿›å…¥"æ‰¹é˜…è®°å½•"
   - æŸ¥çœ‹æ‰€æœ‰åŽ†å²è®°å½•
   - ç‚¹å‡»æŸ¥çœ‹è¯¦æƒ…

3. **æŸ¥çœ‹ç»Ÿè®¡**
   - è¿›å…¥"ä¸ªäººä¸­å¿ƒ"
   - æŸ¥çœ‹åˆ†æ•°è¶‹åŠ¿
   - æŸ¥çœ‹ç­‰çº§åˆ†å¸ƒ

---

## ðŸ› ï¸ å¸¸è§é—®é¢˜è§£å†³

### é—®é¢˜1ï¼šæ— æ³•è®¿é—®ç½‘ç«™

**å¯èƒ½åŽŸå› **ï¼š
- é˜²ç«å¢™æ²¡å¼€æ”¾ç«¯å£
- åŸŸåè§£æžæœªç”Ÿæ•ˆ
- æœåŠ¡æœªå¯åŠ¨

**è§£å†³æ–¹æ³•**ï¼š

```bash
# 1. æ£€æŸ¥é˜²ç«å¢™ï¼ˆUbuntuï¼‰
sudo ufw status
sudo ufw allow 80
sudo ufw allow 443

# 2. æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status nginx
systemctl status essay-grader

# 3. é‡å¯æœåŠ¡
systemctl restart nginx
systemctl restart essay-grader

# 4. æŸ¥çœ‹æ—¥å¿—
tail -f /var/log/nginx/error.log
tail -f /var/www/essay-grader/logs/app.log
```

### é—®é¢˜2ï¼šSSLè¯ä¹¦ç”³è¯·å¤±è´¥

**å¯èƒ½åŽŸå› **ï¼š
- åŸŸåè§£æžæœªç”Ÿæ•ˆ
- 80ç«¯å£è¢«å ç”¨

**è§£å†³æ–¹æ³•**ï¼š

```bash
# 1. ç¡®è®¤åŸŸåå·²è§£æž
ping ä½ çš„åŸŸå

# 2. æ‰‹åŠ¨ç”³è¯·è¯ä¹¦
certbot --nginx -d ä½ çš„åŸŸå

# 3. å¦‚æžœè¿˜æ˜¯å¤±è´¥ï¼Œå…ˆç”¨HTTPè®¿é—®
# ç¼–è¾‘Nginxé…ç½®ï¼Œæš‚æ—¶åŽ»æŽ‰SSLç›¸å…³é…ç½®
```

### é—®é¢˜3ï¼šæ‰¹é˜…å¤±è´¥

**å¯èƒ½åŽŸå› **ï¼š
- OCR APIé…é¢ç”¨å®Œ
- LLM APIé…é¢ç”¨å®Œ
- ç½‘ç»œé—®é¢˜

**è§£å†³æ–¹æ³•**ï¼š

```bash
# 1. æŸ¥çœ‹é”™è¯¯æ—¥å¿—
tail -f /var/www/essay-grader/logs/app.log

# 2. æ£€æŸ¥APIé…ç½®
cat /var/www/essay-grader/.env

# 3. æµ‹è¯•APIè¿žæŽ¥
python /var/www/essay-grader/scripts/test_api.py
```

### é—®é¢˜4ï¼šå¿˜è®°ç®¡ç†å‘˜å¯†ç 

**è§£å†³æ–¹æ³•**ï¼š

```bash
# è¿è¡Œå¯†ç é‡ç½®è„šæœ¬
cd /var/www/essay-grader
python scripts/reset_admin_password.py

# ä¼šç”Ÿæˆæ–°å¯†ç ï¼Œè®°ä¸‹æ¥
```

### é—®é¢˜5ï¼šæ•°æ®åº“æŸå

**è§£å†³æ–¹æ³•**ï¼š

```bash
# 1. åœæ­¢æœåŠ¡
systemctl stop essay-grader

# 2. å¤‡ä»½æ•°æ®åº“
cp /var/www/essay-grader/data/database.db /root/database.db.backup

# 3. ä¿®å¤æ•°æ®åº“
sqlite3 /var/www/essay-grader/data/database.db "PRAGMA integrity_check;"

# 4. å¦‚æžœæ— æ³•ä¿®å¤ï¼Œä»Žå¤‡ä»½æ¢å¤
cp /root/database.db.backup /var/www/essay-grader/data/database.db

# 5. é‡å¯æœåŠ¡
systemctl start essay-grader
```

---

## ðŸ“Š æ—¥å¸¸ç»´æŠ¤

### æ¯æ—¥æ£€æŸ¥

```bash
# æ£€æŸ¥æœåŠ¡çŠ¶æ€
systemctl status essay-grader nginx

# æŸ¥çœ‹ç£ç›˜ä½¿ç”¨
df -h

# æŸ¥çœ‹å†…å­˜ä½¿ç”¨
free -h
```

### æ¯å‘¨å¤‡ä»½

```bash
# åˆ›å»ºå¤‡ä»½è„šæœ¬
cat > /root/backup.sh << 'EOF'
#!/bin/bash
DATE=$(date +%Y%m%d)
BACKUP_DIR="/root/backups"
mkdir -p $BACKUP_DIR

# å¤‡ä»½æ•°æ®åº“
cp /var/www/essay-grader/data/database.db $BACKUP_DIR/database_$DATE.db

# å¤‡ä»½ä¸Šä¼ çš„æ–‡ä»¶
tar -czf $BACKUP_DIR/uploads_$DATE.tar.gz /var/www/essay-grader/data/uploads

# åˆ é™¤30å¤©å‰çš„å¤‡ä»½
find $BACKUP_DIR -name "*.db" -mtime +30 -delete
find $BACKUP_DIR -name "*.tar.gz" -mtime +30 -delete

echo "å¤‡ä»½å®Œæˆ: $DATE"
EOF

# ç»™è„šæœ¬æ‰§è¡Œæƒé™
chmod +x /root/backup.sh

# è®¾ç½®å®šæ—¶ä»»åŠ¡ï¼ˆæ¯å‘¨æ—¥å‡Œæ™¨2ç‚¹æ‰§è¡Œï¼‰
crontab -e
# æ·»åŠ è¿™ä¸€è¡Œï¼š
0 2 * * 0 /root/backup.sh >> /root/backup.log 2>&1
```

### æŸ¥çœ‹æ—¥å¿—

```bash
# æŸ¥çœ‹åº”ç”¨æ—¥å¿—
tail -f /var/www/essay-grader/logs/app.log

# æŸ¥çœ‹Nginxè®¿é—®æ—¥å¿—
tail -f /var/log/nginx/access.log

# æŸ¥çœ‹Nginxé”™è¯¯æ—¥å¿—
tail -f /var/log/nginx/error.log

# æŸ¥çœ‹ç³»ç»Ÿæ—¥å¿—
journalctl -u essay-grader -f
```

### æ›´æ–°ç³»ç»Ÿ

```bash
# æ›´æ–°ç³»ç»Ÿè½¯ä»¶åŒ…
apt update && apt upgrade -y

# æ›´æ–°SSLè¯ä¹¦ï¼ˆè‡ªåŠ¨ï¼‰
certbot renew

# é‡å¯æœåŠ¡
systemctl restart essay-grader nginx
```

---

## ðŸ” å®‰å…¨å»ºè®®

### 1. ä¿®æ”¹SSHç«¯å£

```bash
# ç¼–è¾‘SSHé…ç½®
nano /etc/ssh/sshd_config

# æ‰¾åˆ° #Port 22ï¼Œæ”¹ä¸ºï¼š
Port 2222

# é‡å¯SSHæœåŠ¡
systemctl restart sshd

# è®°å¾—åœ¨é˜²ç«å¢™å¼€æ”¾æ–°ç«¯å£
ufw allow 2222
```

### 2. ç¦ç”¨rootç™»å½•

```bash
# å…ˆåˆ›å»ºæ™®é€šç”¨æˆ·
adduser yourusername
usermod -aG sudo yourusername

# ç¼–è¾‘SSHé…ç½®
nano /etc/ssh/sshd_config

# æ‰¾åˆ° PermitRootLogin yesï¼Œæ”¹ä¸ºï¼š
PermitRootLogin no

# é‡å¯SSHæœåŠ¡
systemctl restart sshd
```

### 3. é…ç½®é˜²ç«å¢™

```bash
# å¯ç”¨é˜²ç«å¢™
ufw enable

# åªå¼€æ”¾å¿…è¦ç«¯å£
ufw allow 22    # SSHï¼ˆæˆ–ä½ ä¿®æ”¹åŽçš„ç«¯å£ï¼‰
ufw allow 80    # HTTP
ufw allow 443   # HTTPS

# æŸ¥çœ‹çŠ¶æ€
ufw status
```

### 4. å®šæœŸæ›´æ–°å¯†ç 

- ç®¡ç†å‘˜å¯†ç ï¼šæ¯æœˆæ›´æ–°
- å­¦ç”Ÿå¯†ç ï¼šé¦–æ¬¡ç™»å½•å¼ºåˆ¶ä¿®æ”¹
- æœåŠ¡å™¨å¯†ç ï¼šæ¯å­£åº¦æ›´æ–°

---

## ðŸ“ž èŽ·å–å¸®åŠ©

### é‡åˆ°é—®é¢˜æ—¶

1. **æŸ¥çœ‹æ—¥å¿—**ï¼š90%çš„é—®é¢˜éƒ½èƒ½ä»Žæ—¥å¿—ä¸­æ‰¾åˆ°åŽŸå› 
2. **æœç´¢é”™è¯¯ä¿¡æ¯**ï¼šå¤åˆ¶é”™è¯¯ä¿¡æ¯åˆ°ç™¾åº¦/Googleæœç´¢
3. **æŸ¥çœ‹æ–‡æ¡£**ï¼šä»”ç»†é˜…è¯»æœ¬æŒ‡å—å’Œä¸»è§„åˆ’æ–‡æ¡£
4. **å¯»æ±‚å¸®åŠ©**ï¼šåœ¨é¡¹ç›®Issuesä¸­æé—®

### æœ‰ç”¨çš„å‘½ä»¤é€ŸæŸ¥

```bash
# æŸ¥çœ‹æœåŠ¡çŠ¶æ€
systemctl status essay-grader

# é‡å¯æœåŠ¡
systemctl restart essay-grader

# æŸ¥çœ‹æ—¥å¿—
tail -f /var/www/essay-grader/logs/app.log

# è¿›å…¥é¡¹ç›®ç›®å½•
cd /var/www/essay-grader

# æŸ¥çœ‹è¿›ç¨‹
ps aux | grep essay

# æŸ¥çœ‹ç«¯å£å ç”¨
netstat -tlnp | grep 8000

# æµ‹è¯•Nginxé…ç½®
nginx -t

# é‡è½½Nginxé…ç½®
nginx -s reload
```

---

## âœ… éƒ¨ç½²æ£€æŸ¥æ¸…å•

éƒ¨ç½²å®ŒæˆåŽï¼Œé€é¡¹æ£€æŸ¥ï¼š

- [ ] èƒ½é€šè¿‡åŸŸåè®¿é—®ç½‘ç«™
- [ ] HTTPSè¯ä¹¦æ­£å¸¸ï¼ˆæµè§ˆå™¨åœ°å€æ æœ‰é”å›¾æ ‡ï¼‰
- [ ] èƒ½ç”¨ç®¡ç†å‘˜è´¦å·ç™»å½•
- [ ] èƒ½æ·»åŠ å­¦ç”Ÿè´¦å·
- [ ] å­¦ç”Ÿèƒ½ç™»å½•å¹¶æŸ¥çœ‹è®°å½•
- [ ] èƒ½ä¸Šä¼ é¢˜ç›®å’Œä½œæ–‡
- [ ] æ‰¹é˜…åŠŸèƒ½æ­£å¸¸
- [ ] èƒ½æŸ¥çœ‹æ‰¹é˜…ç»“æžœ
- [ ] èƒ½å¯¼å‡ºæ•°æ®
- [ ] é˜²ç«å¢™å·²é…ç½®
- [ ] å¤‡ä»½è„šæœ¬å·²è®¾ç½®
- [ ] ä¿®æ”¹äº†é»˜è®¤å¯†ç 

---

## ðŸŽ¯ ä¸‹ä¸€æ­¥

éƒ¨ç½²å®ŒæˆåŽï¼Œå»ºè®®ï¼š

1. **æµ‹è¯•æ‰€æœ‰åŠŸèƒ½**ï¼šç”¨æµ‹è¯•æ•°æ®èµ°ä¸€éå®Œæ•´æµç¨‹
2. **åŸ¹è®­ç”¨æˆ·**ï¼šç»™æ•™å¸ˆå’Œå­¦ç”Ÿç®€å•åŸ¹è®­
3. **å‡†å¤‡æ•°æ®**ï¼šå¯¼å…¥çœŸå®žçš„å­¦ç”Ÿæ•°æ®
4. **ç›‘æŽ§è¿è¡Œ**ï¼šå‰å‡ å¤©å¯†åˆ‡å…³æ³¨ç³»ç»Ÿè¿è¡Œæƒ…å†µ
5. **æ”¶é›†åé¦ˆ**ï¼šå¬å–ç”¨æˆ·æ„è§ï¼ŒæŒç»­æ”¹è¿›

---

## ðŸ“ é™„å½•ï¼šä¸€é”®éƒ¨ç½²è„šæœ¬å†…å®¹

å¦‚æžœè‡ªåŠ¨è„šæœ¬ä¸‹è½½å¤±è´¥ï¼Œå¯ä»¥æ‰‹åŠ¨åˆ›å»ºï¼š

```bash
# åˆ›å»ºè„šæœ¬æ–‡ä»¶
nano deploy.sh
```

å¤åˆ¶ä»¥ä¸‹å†…å®¹ï¼š

```bash
#!/bin/bash

# ä½œæ–‡æ‰¹é˜…ç³»ç»Ÿä¸€é”®éƒ¨ç½²è„šæœ¬
# é€‚ç”¨äºŽUbuntu 20.04

set -e

echo "=========================================="
echo "  ä½œæ–‡æ‰¹é˜…ç³»ç»Ÿ - ä¸€é”®éƒ¨ç½²è„šæœ¬"
echo "=========================================="
echo ""

# é¢œè‰²å®šä¹‰
RED='\033[0;31m'
GREEN='\033[0;32m'
YELLOW='\033[1;33m'
NC='\033[0m' # No Color

# æ£€æŸ¥æ˜¯å¦ä¸ºrootç”¨æˆ·
if [ "$EUID" -ne 0 ]; then 
    echo -e "${RED}è¯·ä½¿ç”¨rootç”¨æˆ·è¿è¡Œæ­¤è„šæœ¬${NC}"
    exit 1
fi

# æ­¥éª¤1ï¼šæ›´æ–°ç³»ç»Ÿ
echo -e "${GREEN}[1/10] æ›´æ–°ç³»ç»Ÿ...${NC}"
apt update && apt upgrade -y

# æ­¥éª¤2ï¼šå®‰è£…Python 3.9
echo -e "${GREEN}[2/10] å®‰è£…Python 3.9...${NC}"
apt install -y python3.9 python3.9-venv python3-pip

# æ­¥éª¤3ï¼šå®‰è£…Node.js
echo -e "${GREEN}[3/10] å®‰è£…Node.js...${NC}"
curl -fsSL https://deb.nodesource.com/setup_18.x | bash -
apt install -y nodejs

# æ­¥éª¤4ï¼šå®‰è£…Nginx
echo -e "${GREEN}[4/10] å®‰è£…Nginx...${NC}"
apt install -y nginx

# æ­¥éª¤5ï¼šå®‰è£…å…¶ä»–ä¾èµ–
echo -e "${GREEN}[5/10] å®‰è£…å…¶ä»–ä¾èµ–...${NC}"
apt install -y git sqlite3 certbot python3-certbot-nginx supervisor

# æ­¥éª¤6ï¼šå…‹éš†é¡¹ç›®ï¼ˆè¿™é‡Œéœ€è¦æ›¿æ¢æˆå®žé™…çš„ä»“åº“åœ°å€ï¼‰
echo -e "${GREEN}[6/10] ä¸‹è½½é¡¹ç›®ä»£ç ...${NC}"
cd /var/www
# git clone https://github.com/your-repo/essay-grader.git
# ä¸´æ—¶æ–¹æ¡ˆï¼šæ‰‹åŠ¨ä¸Šä¼ ä»£ç 
mkdir -p essay-grader
echo -e "${YELLOW}è¯·æ‰‹åŠ¨ä¸Šä¼ é¡¹ç›®ä»£ç åˆ° /var/www/essay-grader${NC}"
read -p "ä»£ç ä¸Šä¼ å®ŒæˆåŽæŒ‰å›žè½¦ç»§ç»­..."

# æ­¥éª¤7ï¼šå®‰è£…åŽç«¯ä¾èµ–
echo -e "${GREEN}[7/10] å®‰è£…åŽç«¯ä¾èµ–...${NC}"
cd /var/www/essay-grader
python3.9 -m venv venv
source venv/bin/activate
pip install -r requirements.txt

# æ­¥éª¤8ï¼šåˆå§‹åŒ–æ•°æ®åº“
echo -e "${GREEN}[8/10] åˆå§‹åŒ–æ•°æ®åº“...${NC}"
python scripts/init_db.py

# æ­¥éª¤9ï¼šæž„å»ºå‰ç«¯
echo -e "${GREEN}[9/10] æž„å»ºå‰ç«¯...${NC}"
cd /var/www/essay-grader/frontend
npm install
npm run build

# æ­¥éª¤10ï¼šé…ç½®æœåŠ¡
echo -e "${GREEN}[10/10] é…ç½®æœåŠ¡...${NC}"

# è¯¢é—®åŸŸå
read -p "è¯·è¾“å…¥ä½ çš„åŸŸåï¼ˆä¾‹å¦‚ï¼šessay.yourdomain.comï¼‰: " DOMAIN

# é…ç½®Supervisor
cat > /etc/supervisor/conf.d/essay-grader.conf << EOF
[program:essay-grader]
directory=/var/www/essay-grader
command=/var/www/essay-grader/venv/bin/uvicorn app.main:app --host 0.0.0.0 --port 8000
user=www-data
autostart=true
autorestart=true
stderr_logfile=/var/log/essay-grader.err.log
stdout_logfile=/var/log/essay-grader.out.log
EOF

# é…ç½®Nginx
cat > /etc/nginx/sites-available/essay-grader << EOF
server {
    listen 80;
    server_name $DOMAIN;

    location / {
        root /var/www/essay-grader/frontend/dist;
        try_files \$uri \$uri/ /index.html;
    }

    location /api/ {
        proxy_pass http://127.0.0.1:8000;
        proxy_set_header Host \$host;
        proxy_set_header X-Real-IP \$remote_addr;
        proxy_set_header X-Forwarded-For \$proxy_add_x_forwarded_for;
    }

    location /uploads/ {
        alias /var/www/essay-grader/data/uploads/;
    }

    client_max_body_size 20M;
}
EOF

# å¯ç”¨ç«™ç‚¹
ln -sf /etc/nginx/sites-available/essay-grader /etc/nginx/sites-enabled/
rm -f /etc/nginx/sites-enabled/default

# æµ‹è¯•Nginxé…ç½®
nginx -t

# é‡å¯æœåŠ¡
supervisorctl reread
supervisorctl update
systemctl restart nginx

# è¯¢é—®æ˜¯å¦é…ç½®SSL
read -p "æ˜¯å¦é…ç½®SSLè¯ä¹¦ï¼Ÿ(y/n): " SSL_CHOICE
if [ "$SSL_CHOICE" = "y" ]; then
    read -p "è¯·è¾“å…¥ä½ çš„é‚®ç®±: " EMAIL
    certbot --nginx -d $DOMAIN --email $EMAIL --agree-tos --non-interactive
fi

echo ""
echo -e "${GREEN}=========================================="
echo "  éƒ¨ç½²å®Œæˆï¼"
echo "==========================================${NC}"
echo ""
echo "è®¿é—®åœ°å€: http://$DOMAIN"
if [ "$SSL_CHOICE" = "y" ]; then
    echo "HTTPSåœ°å€: https://$DOMAIN"
fi
echo ""
echo "é»˜è®¤ç®¡ç†å‘˜è´¦å·:"
echo "  ç”¨æˆ·å: admin@example.com"
echo "  å¯†ç : admin123"
echo ""
echo -e "${YELLOW}âš ï¸  è¯·ç«‹å³ç™»å½•å¹¶ä¿®æ”¹å¯†ç ï¼${NC}"
echo ""
```

ä¿å­˜åŽè¿è¡Œï¼š

```bash
chmod +x deploy.sh
./deploy.sh
```

---

**ç¥ä½ éƒ¨ç½²é¡ºåˆ©ï¼å¦‚æœ‰é—®é¢˜éšæ—¶è¯¢é—®ã€‚** ðŸŽ‰