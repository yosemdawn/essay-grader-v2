import{c as $,a as F}from"./records-ee9017a3.js";import{d as G,r as v,k as S,D as H,c as L,b as s,e as t,w as a,C as V,i as r,G as q,o as C,y as o,j as i,H as A,l as M,t as J}from"./index-bd42a384.js";import{_ as K}from"./_plugin-vue_export-helper-c27b6911.js";const O={class:"my-records"},Q={class:"stat-content"},W={class:"stat-info"},X={class:"stat-value"},Y={class:"stat-content"},Z={class:"stat-info"},ee={class:"stat-value"},te={class:"stat-content"},ae={class:"stat-info"},se={class:"stat-value"},le={class:"card-header"},oe={class:"detail-text"},ne={class:"detail-text"},de={class:"detail-text"},re=G({__name:"MyRecords",setup(ie){const f=v(!1),p=v([]),b=v(0),w=v(1),g=v(20),m=v(!1),d=v(null),R=S(()=>p.value.length===0?"0":(p.value.reduce((e,u)=>e+u.score,0)/p.value.length).toFixed(1)),I=S(()=>p.value.length===0?"0":Math.max(...p.value.map(l=>l.score))),y=async()=>{f.value=!0;try{const l=(w.value-1)*g.value,e=g.value,u=await $(l,e);p.value=u.records,b.value=u.total}catch(l){V.error(l.message||"åŠ è½½è®°å½•å¤±è´¥")}finally{f.value=!1}},D=l=>l>=90?"success":l>=80?"primary":l>=60?"warning":"danger",k=l=>new Date(l).toLocaleString("zh-CN"),N=async l=>{try{const e=await F(l.id);d.value=e,m.value=!0}catch(e){V.error(e.message||"åŠ è½½è¯¦æƒ…å¤±è´¥")}};return H(()=>{y()}),(l,e)=>{const u=r("el-card"),h=r("el-col"),B=r("el-row"),x=r("el-button"),_=r("el-table-column"),z=r("el-tag"),j=r("el-table"),U=r("el-pagination"),c=r("el-descriptions-item"),E=r("el-descriptions"),P=r("el-dialog"),T=q("loading");return C(),L("div",O,[e[14]||(e[14]=s("h2",{class:"page-title"},"ðŸ“ æˆ‘çš„æ‰¹é˜…è®°å½•",-1)),t(B,{gutter:20,class:"stats-row"},{default:a(()=>[t(h,{xs:24,sm:8},{default:a(()=>[t(u,{class:"stat-card",shadow:"hover"},{default:a(()=>[s("div",Q,[e[5]||(e[5]=s("div",{class:"stat-icon"},"ðŸ“š",-1)),s("div",W,[s("div",X,o(b.value),1),e[4]||(e[4]=s("div",{class:"stat-label"},"æ€»æ‰¹é˜…æ•°",-1))])])]),_:1})]),_:1}),t(h,{xs:24,sm:8},{default:a(()=>[t(u,{class:"stat-card",shadow:"hover"},{default:a(()=>[s("div",Y,[e[7]||(e[7]=s("div",{class:"stat-icon"},"â­",-1)),s("div",Z,[s("div",ee,o(R.value),1),e[6]||(e[6]=s("div",{class:"stat-label"},"å¹³å‡åˆ†æ•°",-1))])])]),_:1})]),_:1}),t(h,{xs:24,sm:8},{default:a(()=>[t(u,{class:"stat-card",shadow:"hover"},{default:a(()=>[s("div",te,[e[9]||(e[9]=s("div",{class:"stat-icon"},"ðŸ†",-1)),s("div",ae,[s("div",se,o(I.value),1),e[8]||(e[8]=s("div",{class:"stat-label"},"æœ€é«˜åˆ†æ•°",-1))])])]),_:1})]),_:1})]),_:1}),t(u,{class:"table-card",shadow:"hover"},{header:a(()=>[s("div",le,[e[11]||(e[11]=s("span",null,"æ‰¹é˜…è®°å½•åˆ—è¡¨",-1)),t(x,{type:"primary",onClick:y,loading:f.value},{default:a(()=>[...e[10]||(e[10]=[i(" åˆ·æ–° ",-1)])]),_:1},8,["loading"])])]),default:a(()=>[A((C(),M(j,{data:p.value,stripe:"",style:{width:"100%"}},{default:a(()=>[t(_,{prop:"id",label:"ID",width:"80"}),t(_,{prop:"essay_id",label:"ä½œæ–‡ID",width:"120"}),t(_,{prop:"score",label:"åˆ†æ•°",width:"100"},{default:a(({row:n})=>[t(z,{type:D(n.score),size:"large"},{default:a(()=>[i(o(n.score),1)]),_:2},1032,["type"])]),_:1}),t(_,{prop:"advantages",label:"ä¼˜ç‚¹","show-overflow-tooltip":"","min-width":"150"}),t(_,{prop:"disadvantages",label:"ä¸è¶³","show-overflow-tooltip":"","min-width":"150"}),t(_,{prop:"suggestions",label:"å»ºè®®","show-overflow-tooltip":"","min-width":"150"}),t(_,{prop:"graded_at",label:"æ‰¹é˜…æ—¶é—´",width:"180"},{default:a(({row:n})=>[i(o(k(n.graded_at)),1)]),_:1}),t(_,{label:"æ“ä½œ",width:"120",fixed:"right"},{default:a(({row:n})=>[t(x,{type:"primary",link:"",onClick:ue=>N(n)},{default:a(()=>[...e[12]||(e[12]=[i(" æŸ¥çœ‹è¯¦æƒ… ",-1)])]),_:1},8,["onClick"])]),_:1})]),_:1},8,["data"])),[[T,f.value]]),t(U,{"current-page":w.value,"onUpdate:currentPage":e[0]||(e[0]=n=>w.value=n),"page-size":g.value,"onUpdate:pageSize":e[1]||(e[1]=n=>g.value=n),total:b.value,"page-sizes":[10,20,50,100],layout:"total, sizes, prev, pager, next, jumper",onSizeChange:y,onCurrentChange:y,style:{"margin-top":"20px","justify-content":"center"}},null,8,["current-page","page-size","total"])]),_:1}),t(P,{modelValue:m.value,"onUpdate:modelValue":e[3]||(e[3]=n=>m.value=n),title:"æ‰¹é˜…è¯¦æƒ…",width:"800px"},{footer:a(()=>[t(x,{type:"primary",onClick:e[2]||(e[2]=n=>m.value=!1)},{default:a(()=>[...e[13]||(e[13]=[i("å…³é—­",-1)])]),_:1})]),default:a(()=>[d.value?(C(),M(E,{key:0,column:2,border:""},{default:a(()=>[t(c,{label:"è®°å½•ID"},{default:a(()=>[i(o(d.value.id),1)]),_:1}),t(c,{label:"ä½œæ–‡ID"},{default:a(()=>[i(o(d.value.essay_id),1)]),_:1}),t(c,{label:"å­¦ç”Ÿå§“å"},{default:a(()=>[i(o(d.value.student_name),1)]),_:1}),t(c,{label:"åˆ†æ•°"},{default:a(()=>[t(z,{type:D(d.value.score),size:"large"},{default:a(()=>[i(o(d.value.score),1)]),_:1},8,["type"])]),_:1}),t(c,{label:"ä¼˜ç‚¹",span:2},{default:a(()=>[s("div",oe,o(d.value.advantages),1)]),_:1}),t(c,{label:"ä¸è¶³",span:2},{default:a(()=>[s("div",ne,o(d.value.disadvantages),1)]),_:1}),t(c,{label:"å»ºè®®",span:2},{default:a(()=>[s("div",de,o(d.value.suggestions),1)]),_:1}),t(c,{label:"æ‰¹é˜…äºº"},{default:a(()=>[i(o(d.value.graded_by),1)]),_:1}),t(c,{label:"æ‰¹é˜…æ—¶é—´"},{default:a(()=>[i(o(k(d.value.graded_at)),1)]),_:1})]),_:1})):J("",!0)]),_:1},8,["modelValue"])])}}});const ve=K(re,[["__scopeId","data-v-2b4f8da3"]]);export{ve as default};
