import{d as k,u as D,r as A,D as M,c as N,b as s,e,w as o,g as T,C as z,i as l,o as B,y as i,m as u,j as p}from"./index-bd42a384.js";import{c as G}from"./records-ee9017a3.js";import{_ as P}from"./_plugin-vue_export-helper-c27b6911.js";const V={class:"profile"},E={class:"avatar-section"},U={style:{"font-size":"48px"}},j={class:"stat-item"},F={class:"stat-content"},I={class:"stat-value"},L={class:"stat-item"},q={class:"stat-content"},H={class:"stat-value"},J={class:"stat-item"},K={class:"stat-content"},O={class:"stat-value"},Q={class:"stat-item"},W={class:"stat-content"},X={class:"stat-value"},Y=k({__name:"Profile",setup(Z){const h=T(),_=D(),c=A({totalRecords:0,avgScore:"0",highestScore:"0",lastGradedAt:"æš‚æ— è®°å½•"}),x=async()=>{try{const n=await G(0,100);if(c.value.totalRecords=n.total,n.records.length>0){const t=n.records.reduce((r,d)=>r+d.score,0);c.value.avgScore=(t/n.records.length).toFixed(1),c.value.highestScore=Math.max(...n.records.map(r=>r.score)).toString();const v=n.records.sort((r,d)=>new Date(d.graded_at).getTime()-new Date(r.graded_at).getTime())[0];c.value.lastGradedAt=new Date(v.graded_at).toLocaleString("zh-CN")}}catch(n){z.error(n.message||"åŠ è½½ç»Ÿè®¡æ•°æ®å¤±è´¥")}},w=()=>{h.push("/student/records")};return M(()=>{x()}),(n,t)=>{const v=l("el-avatar"),r=l("el-tag"),d=l("el-descriptions-item"),S=l("el-descriptions"),m=l("el-card"),g=l("el-col"),f=l("el-divider"),C=l("el-row"),y=l("el-alert"),R=l("el-button");return B(),N("div",V,[t[13]||(t[13]=s("h2",{class:"page-title"},"ğŸ‘¤ ä¸ªäººä¿¡æ¯",-1)),e(C,{gutter:20},{default:o(()=>[e(g,{xs:24,md:12},{default:o(()=>[e(m,{class:"info-card",shadow:"hover"},{header:o(()=>[...t[0]||(t[0]=[s("span",null,"åŸºæœ¬ä¿¡æ¯",-1)])]),default:o(()=>[s("div",E,[e(v,{size:100,style:{background:"linear-gradient(135deg, #667eea 0%, #764ba2 100%)"}},{default:o(()=>{var a;return[s("span",U,i((a=u(_).username)==null?void 0:a.charAt(0).toUpperCase()),1)]}),_:1})]),e(S,{column:1,border:"",style:{"margin-top":"20px"}},{default:o(()=>[e(d,{label:"ç”¨æˆ·å"},{default:o(()=>[e(r,{type:"primary"},{default:o(()=>{var a;return[p(i((a=u(_).user)==null?void 0:a.username),1)]}),_:1})]),_:1}),e(d,{label:"è§’è‰²"},{default:o(()=>[e(r,{type:"success"},{default:o(()=>[...t[1]||(t[1]=[p("ğŸ‘¨â€ğŸ“ å­¦ç”Ÿ",-1)])]),_:1})]),_:1}),e(d,{label:"é‚®ç®±"},{default:o(()=>{var a;return[p(i(((a=u(_).user)==null?void 0:a.email)||"æœªè®¾ç½®"),1)]}),_:1}),e(d,{label:"ç­çº§"},{default:o(()=>{var a;return[p(i(((a=u(_).user)==null?void 0:a.class_name)||"æœªè®¾ç½®"),1)]}),_:1}),e(d,{label:"è´¦å·çŠ¶æ€"},{default:o(()=>{var a;return[e(r,{type:(a=u(_).user)!=null&&a.is_active?"success":"danger"},{default:o(()=>{var b;return[p(i((b=u(_).user)!=null&&b.is_active?"æ´»è·ƒ":"ç¦ç”¨"),1)]}),_:1},8,["type"])]}),_:1})]),_:1})]),_:1})]),_:1}),e(g,{xs:24,md:12},{default:o(()=>[e(m,{class:"stats-card",shadow:"hover"},{header:o(()=>[...t[2]||(t[2]=[s("span",null,"å­¦ä¹ ç»Ÿè®¡",-1)])]),default:o(()=>[s("div",j,[t[4]||(t[4]=s("div",{class:"stat-icon"},"ğŸ“š",-1)),s("div",F,[t[3]||(t[3]=s("div",{class:"stat-label"},"æ€»æ‰¹é˜…æ•°",-1)),s("div",I,i(c.value.totalRecords),1)])]),e(f),s("div",L,[t[6]||(t[6]=s("div",{class:"stat-icon"},"â­",-1)),s("div",q,[t[5]||(t[5]=s("div",{class:"stat-label"},"å¹³å‡åˆ†æ•°",-1)),s("div",H,i(c.value.avgScore),1)])]),e(f),s("div",J,[t[8]||(t[8]=s("div",{class:"stat-icon"},"ğŸ†",-1)),s("div",K,[t[7]||(t[7]=s("div",{class:"stat-label"},"æœ€é«˜åˆ†æ•°",-1)),s("div",O,i(c.value.highestScore),1)])]),e(f),s("div",Q,[t[10]||(t[10]=s("div",{class:"stat-icon"},"ğŸ“ˆ",-1)),s("div",W,[t[9]||(t[9]=s("div",{class:"stat-label"},"æœ€è¿‘æ‰¹é˜…",-1)),s("div",X,i(c.value.lastGradedAt),1)])])]),_:1})]),_:1})]),_:1}),e(m,{class:"tips-card",shadow:"hover",style:{"margin-top":"20px"}},{header:o(()=>[...t[11]||(t[11]=[s("span",null,"ğŸ’¡ æ¸©é¦¨æç¤º",-1)])]),default:o(()=>[e(y,{title:"å¦‚éœ€ä¿®æ”¹ä¸ªäººä¿¡æ¯ï¼Œè¯·è”ç³»ç®¡ç†å‘˜",type:"info",closable:!1,"show-icon":""}),e(y,{title:"å¦‚éœ€æŸ¥çœ‹æ‰¹é˜…è®°å½•ï¼Œè¯·å‰å¾€æˆ‘çš„è®°å½•é¡µé¢",type:"success",closable:!1,"show-icon":"",style:{"margin-top":"10px"}},{default:o(()=>[e(R,{type:"primary",link:"",onClick:w},{default:o(()=>[...t[12]||(t[12]=[p(" å‰å¾€æˆ‘çš„è®°å½• â†’ ",-1)])]),_:1})]),_:1})]),_:1})])}}});const et=P(Y,[["__scopeId","data-v-d82cbce2"]]);export{et as default};
